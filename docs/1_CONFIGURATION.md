# Configuration

The ELCM instance can be configured by editing the `config.yml` file. The values that can be configured are:

* TempFolder: Root folder where the temporal files for the Executors can be created.
* ResultsFolder: Root folder where the files generated by each experiment execution will be saved.
* VerdictOnError: Verdict to set on errored tasks, unless overridden by the task parameters. For more information see
the 'Task and execution verdicts' section below.
* Logging:
    * Folder: Root folder where the different log files will be saved.
    * AppLevel: Minimum log level that will be displayed in the console.
    * LogLevel: Minimum log level that will be recorded in the log files.
* Portal:
    * Enabled: Whether to send experiment updates to the portal or not.
    * Host: Location of the machine where the Portal is running (localhost by default).
    * Port: Port where the Portal is listening for connections (5000 by default).
* Tap:
    * Enabled: Whether to use TAP or not, if set to False the settings below will be ignored
    * OpenTap: True if using OpenTap (TAP 9.0 or later), False if using TAP 8 (legacy option)
    * Exe: TAP CLI executable name
    * Folder: TAP installation folder
    * Results: TAP results folder
    * EnsureClosed: Performs an additional check on test plan completion, to ensure that all child processes are
    correctly closed. Defaults to True.
    * EnsureAdbClosed: Forcibly close any adb process at the end of the execution. **This will close adb instances
      started by any other means, and may cause issues with other running experiment executions**. Defaults to False,
      set to True only if the TAP executions hang at the end frequently due to adb not closing.
> These values will be used by the `Run.TapExecute` task.
* Grafana:
    * Enabled: If set to False the settings below will be ignored
    * Host: Location of the machine where the Grafana instance is running
    * Port: Port where the Grafana API is listening
    * Bearer: Grafana API key without the 'Bearer ' prefix
    * ReportGenerator: URL where the `Grafana reporter` instance can be reached, if any
> These values will be used when creating a dashboard for the results generated by an experiment execution.
* SliceManager:
    * Host: Location of the machine where the Katana Slice Manager is running
    * Port: Port where the Slice Manager is listening
> These values will be used to communicate with the Katana Slice Manager when deploying/decommissioning slices and when 
> using the `Run.SingleSliceCreationTime` and `Run.SliceCreationTime` tasks. 
* InfluxDb:
    * Enabled: If set to False the settings below will be ignored
    * Host: Location of the machine where the InfluxDb instance is running
    * Port: Port where InfluxDB is listening
    * User: InfluxDb instance user
    * Password: InfluxDb user password
    * Database: InfluxDb instance database
> These values will be used for sending results to an InfluxDb instance, for example when running the 
> `Run.SingleSliceCreationTime`, `Run.SliceCreationTime` or `Run.CsvToInflux` tasks, and for extracting the execution 
> results on the secondary side of a distributed experiment. Additional tags will be generated by using the values in 
> the `Metadata` section of the configuration.
* Metadata:
    * HostIp: IP address of the machine where the ELCM is running
    * Facility: Facility name (or platform)
> Additional ELCM instance metadata, currently used for values sent to InfluxDb
* EastWest: Configuration for distributed experiments.
    * Enabled: Boolean value indicating if the East/West interfaces are available. Defaults to `False`.
    * Timeout: Timeout for any communication with the remote side of the experiment execution. Defaults to 120 seconds.
    * Remotes: Dictionary containing the connection configuration for each remote platform's ELCM, with each key
      containing 'Host' and 'Port' values in the same format as in the `Portal` or `SliceManager` sections. Defaults to 
      two (invalid) example entries.

An additional configuration file (`evolved5g.yml`) contains the configuration values for the EVOLVED-5G tasks. The
configuration values in this file are:

* JenkinsApi: Configuration values for the EVOLVED-5G CI/CD infrastructure.
   * Enabled: Boolean value indicating if the Jenkins API will be used. Defaults to `False`.
   * Host: Address where the Jenkins API is listening
   * Port: Port where the API is listening. If empty, the default ports (80 for http, 443 for https) will be used
   * User: Provided user name
   * Password: Provided password
* NefEmulator: Configuration values for the NEF Emulator.
   * Enabled: Boolean value indicating if the NEF Emulator will be used. Defaults to `False`.
   * Host: Address where the NEF Emulator is listening
   * Port: Port where the API is listening. If empty, the default ports (80 for http, 443 for https) will be used
   * User: User name
   * Password: Password
